name: Sync Immich

on:
  schedule:
    - cron: '0 18,0,6,12 * * *'  # Every 6 hours (2AM, 8AM, 2PM, 8PM UTC+8)
  workflow_dispatch:

jobs:
  sync:
    uses: ./.github/workflows/sync-multi-template.yml
    with:
      config: |
        {
          "version_key": "immich-app/immich",
          "source_repo": "immich-app/immich",
          "sync_type": "release",
          "components": [
            {
              "type": "image",
              "images": [
                "ghcr.io/immich-app/immich-server",
                "ghcr.io/immich-app/immich-machine-learning"
              ]
            }
          ]
        }
    secrets: inherit

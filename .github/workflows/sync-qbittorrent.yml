name: Sync qBittorrent

on:
  schedule:
    - cron: '0 18 * * *'  # Daily at 2 AM UTC+8 (18:00 UTC)
  workflow_dispatch:

jobs:
  sync:
    uses: ./.github/workflows/sync-template.yml
    with:
      repo: 'linuxserver/docker-qbittorrent'
      sync_type: 'release'
      dockerfile: |
        FROM lscr.io/linuxserver/qbittorrent:{VERSION}
        RUN apk add --no-cache curl unzip && \
            curl -sL -o vuetorrent.zip "https://github.com/VueTorrent/VueTorrent/releases/latest/download/vuetorrent.zip" && \
            unzip -q vuetorrent.zip -d /app/vuetorrent && \
            rm -f vuetorrent.zip
    secrets: inherit

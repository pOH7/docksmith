name: Sync qBittorrent

on:
  schedule:
    - cron: '0 18 * * *'  # Daily at 2 AM UTC+8 (18:00 UTC)
  workflow_dispatch:

jobs:
  sync:
    uses: ./.github/workflows/sync-multi-template.yml
    with:
      config: |
        {
          "version_key": "linuxserver/docker-qbittorrent",
          "source_repo": "linuxserver/docker-qbittorrent",
          "sync_type": "release",
          "components": [
            {
              "type": "dockerfile",
              "image_name": "qbittorrent",
              "dockerfile": "FROM lscr.io/linuxserver/qbittorrent:{VERSION}\nRUN apk add --no-cache curl unzip && \\\n    curl -sL -o vuetorrent.zip \"https://github.com/VueTorrent/VueTorrent/releases/latest/download/vuetorrent.zip\" && \\\n    unzip -q vuetorrent.zip -d / && \\\n    rm -f vuetorrent.zip"
            }
          ]
        }
    secrets: inherit
